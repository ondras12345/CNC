# Copy this file to your gerber directory and name it `millproject`
# See `man pcb2gcode`

# Set paths to gbr files
back=
drill=
outline=
front=

# Alignment pins
# You need to decide where to drill alignment holes.
# For example, you can put them in the middle of the board.
mirror-axis=0mm

# Machine settings
metric=true
metricoutput=true
zsafe=2
spinup-time=2.5
zchange=0
zchange-absolute=true
g0-vertical-speed=3000
g0-horizontal-speed=3000


# Optimization
# TODO
#optimise=?
#path-finding-limit=?


# Milling
mill-diameters=1.0mm,0.39mm
mill-feed=500
mill-vertfeed=120
mill-speed=20000
zwork=-0.12

# Uncomment to enable multi-pass isolation
# TODO always do at least 1mm multi-pass ??
#isolation-width=1.0mm
#milling-overlap=50%

# Voronoi mode (not tested)
#voronoi=true
#preserve-thermal-reliefs=true


# Drilling
# Even for double sided board, we want to drill from the back side.
# It might be tempting to drill from the front and use the bit to drill
# alignment holes, but that would interfere with back side autolevelling.
drill-side=back
zdrill=-1.75
drill-feed=700
drill-speed=20000
drills-available=0.8mm:-0.3mm:+0.1mm,1.0mm:-0.2mm:+0.2mm

zmilldrill=-1.65
milldrill-diameter=1.0
min-milldrill-hole-diameter=1.2  # TODO need 1.0 for 1mm slots
# outline (cut-) feeds and speeds are used

# Outline
cutter-diameter=1.0
zcut=-1.65
cut-feed=80  # TODO adjust
cut-vertfeed=30
cut-speed=20000
cut-infeed=0.85
cut-side=back
bridges=2mm
zbridges=-0.8mm
bridgesnum=2

# Autolevelling
al-back=1
al-front=1
software=linuxcnc
al-x=10mm
al-y=10mm
# probing with 3D touch probe should allow us to go faster
al-probefeed=100  # TODO faster ?? - calculate from controller latency
al-probecode=G38.2
# TODO this does not autolevel outline and drilling
